(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{48:function(e,t,n){e.exports=n(54)},54:function(e,t,n){"use strict";n.r(t);var a,o=n(1),i=n.n(o),s=n(15),r=n.n(s),l=n(7),c=n(35),u=n(36),d=n(44),f=n(37),h=n(16),g=n(45),m=n(78),b=n(77),p=n(74),v=n(80),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).apiAddress="https://jsonplaceholder.typicode.com/posts",n.apiAddressIsLive="https://jsonplaceholder.typicode.com",n.state={firstName:"",lastName:"",awaitingRequests:0},n.onSubmit=n.onSubmit.bind(Object(h.a)(n)),n.setValue=n.setValue.bind(Object(h.a)(n)),n.trySendAgain=n.trySendAgain.bind(Object(h.a)(n)),setInterval(n.trySendAgain,1e4),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"trySendAgain",value:function(){var e=this,t=localStorage.getItem("offlineRequests");if(null!=t){var n=JSON.parse(t),a=n;fetch(this.apiAddressIsLive).then(function(t){n.forEach(function(t,n){fetch(e.apiAddress,{method:"POST",body:JSON.stringify({title:t.firstName,body:t.lastName})}).then(function(t){console.log("success",t),alert("Offline request has been sent"),a.splice(n,1),localStorage.setItem("offlineRequests",JSON.stringify(a)),e.setState({awaitingRequests:a.length})})})})}}},{key:"onSubmit",value:function(){var e=this;console.log(this.state),fetch(this.apiAddress,{method:"POST",body:JSON.stringify({title:this.state.firstName,body:this.state.lastName})}).then(function(e){console.log("success",e),alert("Request has been sent")}).catch(function(t){console.log("failure",t);var n=localStorage.getItem("offlineRequests"),a=null;null==n?a=[e.state]:(a=JSON.parse(n)).push(e.state),localStorage.setItem("offlineRequests",JSON.stringify(a)),e.setState({awaitingRequests:a.length})})}},{key:"setValue",value:function(e,t){var n=this.state;n[e]=t,this.setState(n,this.forceUpdate)}},{key:"render",value:function(){var e=this;return i.a.createElement(m.a,{horizontalAlign:"center",verticalAlign:"start",verticalFill:!0,styles:{root:{width:"960px",margin:"0 auto",textAlign:"center",color:"#605e5c"}},gap:15},i.a.createElement(b.a,{label:"First name",required:!0,value:this.state.firstName,onChange:function(t,n){e.setValue("firstName",n)}}),i.a.createElement(b.a,{label:"Last name",required:!0,value:this.state.lastName,onChange:function(t,n){e.setValue("lastName",n)}}),i.a.createElement(p.a,{text:"Submit",allowDisabledFocus:!0,onClick:this.onSubmit}),i.a.createElement(v.a,null,"Awaiting offline requests: ",this.state.awaitingRequests))}}]),t}(i.a.Component),y=(l.d.semibold,n(75)),S=n(81),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}Object(l.t)({selectors:{":global(body), :global(html), :global(#root)":{margin:0,padding:0,height:"100vh"}}}),r.a.render(i.a.createElement(S.a,y.a,i.a.createElement(function(){return i.a.createElement(w,null)},null)),document.getElementById("root")),"serviceWorker"in navigator&&(new URL("",window.location.href),window.addEventListener("load",function(){var e="".concat("","/service-worker.js");N?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?(console.log("No service worker found. Probably a different app. Reload the page."),navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})})):O(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,a),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):O(e,a)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.65cdb187.chunk.js.map